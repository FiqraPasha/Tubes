<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="coba.css">
    <title>Dt</title>
    
</head>
<body>
    
    <h2>Apakah kamu Introvert,Ekstrovert,atau Ambivert?</h2>
    <div id="quiz-area">
        <section class="q-n-a">
            <h3 class="question"> soal personality</h3>
            <div class="answers">
                <div class="answer" data-value="1">1</div>
                <div class="answer" data-value="2">2</div>
                <div class="answer" data-value="3">3</div>
            </div>
            <div class="button-holder clearfix">
                <div class="previous mini button">Previous</div>
                <div class="next mini button">Next</div>
            </div>
        </section>

        <section class="q-n-a">
            <h3 class="question"> soal personality</h3>
            <div class="answers">
                <div class="answer" data-value="1">4</div>
                <div class="answer" data-value="2">5</div>
                <div class="answer" data-value="3">6</div>
            </div>
            <div class="button-holder clearfix">
                <div class="previous mini button">Previous</div>
                <div class="next mini button">Next</div>
            </div>
        </section>

        <section class="q-n-a">
            <h3 class="question"> soal personality</h3>
            <div class="answers">
                <div class="answer" data-value="1">7</div>
                <div class="answer" data-value="2">8</div>
                <div class="answer" data-value="3">9</div>
            </div>
            <div class="button-holder clearfix">
                <div class="previous mini button">Previous</div>
                <div class="next mini button">Next</div>
            </div>
        </section>

        <section class="q-n-a">
            <h3 class="question"> soal personality</h3>
            <div class="answers">
                <div class="answer" data-value="1">10</div>
                <div class="answer" data-value="2">11</div>
                <div class="answer" data-value="3">12</div>
            </div>
            <div class="button-holder clearfix">
                <div class="previous mini button">Previous</div>
                <div class="next mini button">Next</div>
            </div>
        </section>

        <section class="q-n-a">
            <h3 class="question"> soal personality</h3>
            <div class="answers">
                <div class="answer" data-value="1">13</div>
                <div class="answer" data-value="2">14</div>
                <div class="answer" data-value="3">15</div>
            </div>
            <div class="button-holder clearfix">
                <div class="previous mini button">Previous</div>
                <div class="next mini button">Next</div>
            </div>
        </section>
        
    </div>
    <div class="button finish" style="display: none;">what am i?</div>
    <div class="response" style="display: none;">
        <p></p>
        <div class="missed button" style="display: none;">Check Answers</div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous">
    </script>

    <script type="text/javascript">
        var questions = $(".question").length;
        var total = 0;
        var avg = 0;
        var myQuestions = $('section.q-n-a');
        var currQ = 0;

        
        //console.log(myQuestions);

        // answer//
        myQuestions.each( function(index){
            var myAnswers = $(this).find('.answer');
            
            $(this).find('.answers').html(myAnswers);
            $(this).attr('id', index+1);

            if(index == 0){

                $(this).find('.previous').remove();
            }
            
        })

        $('#quiz-area').html(myQuestions);

        function showQ(){
            $('section.q-n-a').hide();
            currQ++;
            if($('#'+currQ).length > 0){
                $('#'+currQ).fadeIn(200);
            }else{
                $('.finish').fadeIn();
            }
        }
        showQ();
        $('.previous, .next, .missed').click(function(){
            if($(this).hasClass('previous')){
                currQ-=2
            }else if($(this).hasClass('missed')){
                currQ = 0;
                $('.response, .finish, .missed').hide();
            }    
            showQ();
        })



        

        $('.answer').on('click', function(){
            if($(this).parent().find('.selected').length > 0){
                total -= $(this).parent().find('.selected').data('value');
                $(this).parent().find('.selected').removeClass('selected');
            }

            $(this).addClass('selected');
            total += $(this).data('value');

            console.log(total);
        })
        $('.finish').on('click', function(){
            avg = total / questions;
            var message = '';
            if($('.selected').length === questions){
                
                if(avg < 1.5){
                message = 'you 1';
                }else if(avg<2.5){
                message = 'you 2';
                }else if (avg<3.5){
                message = 'you 3';
                }else{
                message = 'you 4';
                }

                $('#quiz-area, .finish').hide();    
            }else{
                message = 'kamu belum jawab semua';
                $('.missed').show();
            }
                $('.response p').text(message)
                $('.response').show();    
           
            //alert(message);


        })
    </script>

	
</body>
</html>